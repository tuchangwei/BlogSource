title: Rails学习中的疑问与解答
date: 2015-03-04 16:51:53
tags: Rails
---
1. 怎么看待 link_to 方法里的参数规则？

	`link_to 'Destroy', article_path(article), method: :delete, data: { confirm: 'Are you sure?'}`
	上面的link_to函数让我手写的话，目前我是写不出来啊。

	link_to 是函数名

	'Destroy' 是第一个参数

	article_path(article) 第二个参数

	method: :delete 这个是什么鬼？是一个hash吗, hash的key和value都是symbol类型？
	
	data: { confirm: 'Are you sure?'} 这个又是什么鬼？一个hash，然后它的value值是一个hash吗？
		
	我这样分析对吗？请大神指点。
	
	###解答：
	这是 Ruby 的语言特性，当参数列表最后是几个 key-value pair 的时候，Ruby 自动将其合成一个 Hash ，作为一个参数传入。
另一种表述方法是，当 Hash 作为参数列表的最后一个参数传入时，可以省略大括号。

	所以当你看到参数列表最后有好几个 key-value 对的时候，就要反应过来这只是一个参数

	自己写的时候，一开始可以不省略，等熟了再省掉。比方为了清晰你也可以写成这样

	```
	link_to('Destroy',
        article_path(article),
        { 
            method: :delete,
            data: { 
                confirm: 'Are you sure?' 
            }
        })
    ```
	不过我觉得这样就更乱了.....
	要不你就每个参数写一行
	```
	link_to('Destroy',
        article_path(article),
        { method: :delete, data: { confirm: 'Are you sure?' } })
    ```
    
    [具体讨论](https://ruby-china.org/topics/24427)
2. render 是渲染到当前页面吗？

	```
	render plain: params[:article].inspect
	```
	
	###解答：

3. redirect_to怎么知道传递的是此model的id啊

	```
	redirect_to @article
	```
	redirect_to(options = {}, response_status = {}) Redirects the browser to the target specified in options. Record - The URL will be generated by calling url_for with the options, which will reference a named URL for that record.
	
	So when one does redirect_to(@book) @book is a specific record with and id
	
	[具体讨论](http://stackoverflow.com/questions/14179050/confusion-about-passing-instance-variables-to-redirect-to-method-as-seen-in-rai)
	